schema: '2.0'
stages:
  lyrics-etl:
    cmd: reproml etl lyrics
    outs:
    - path: data/processed/lyrics
      md5: bdef894226974698cb0745fff57fe54b.dir
      size: 18091467
      nfiles: 37
    - path: data/raw/lyrics/lyrics_whole.csv.zip
      md5: a9e618c5b49032cc096d163b68966ecb
      size: 10738951
  get-lyrics:
    cmd: reproml etl get-lyrics
    deps:
    - path: reproml/etl/lyrics/_lyrics.py
      md5: 7ab85d700a6eb85bca6da504353a0e43
      size: 377
    outs:
    - path: data/raw/lyrics/
      md5: d07c4d5e01e14de395b2185fdb828e63.dir
      size: 89409295
      nfiles: 2
  prepro-lyrics:
    cmd: reproml prepro process
    deps:
    - path: data/raw/lyrics/
      md5: d07c4d5e01e14de395b2185fdb828e63.dir
      size: 89409295
      nfiles: 2
    - path: reproml/preprocess/_preprocess.py
      md5: 32a74b137d42a7b76d6982ac09187289
      size: 1799
    outs:
    - path: data/processed/lyrics
      md5: 1812c9ff984fcef3bffdff76634fed5e.dir
      size: 69960076
      nfiles: 83
  split-lyrics:
    cmd: reproml prepro split
    deps:
    - path: data/processed/lyrics/
      md5: 1812c9ff984fcef3bffdff76634fed5e.dir
      size: 69960076
      nfiles: 83
    - path: reproml/preprocess/_preprocess.py
      md5: 32a74b137d42a7b76d6982ac09187289
      size: 1799
    outs:
    - path: data/modeling/test_set.parquet
      md5: 1cac26bac3ebc47511ff17310802a514
      size: 14596176
    - path: data/modeling/train_set.parquet
      md5: 141fa3268da342edb5e998d2c8d35358
      size: 55010175
  train-model:
    cmd: reproml ml train
    deps:
    - path: data/modeling/train_set.parquet
      md5: 141fa3268da342edb5e998d2c8d35358
      size: 55010175
    - path: reproml/ml/_ml.py
      md5: 5d829ce72ad05071f19b9f0e77f9c0ff
      size: 721
    outs:
    - path: model_artifacts/model.pkl
      md5: 725081f679587c157ad7a1679fc57ee2
      size: 17704150
  validate-model:
    cmd: reproml validate metrics
    deps:
    - path: data/modeling/test_set.parquet
      md5: 1cac26bac3ebc47511ff17310802a514
      size: 14596176
    - path: model_artifacts/model.pkl
      md5: 725081f679587c157ad7a1679fc57ee2
      size: 17704150
    outs:
    - path: data/metrics/performance.json
      md5: a7a14b2b3ec1b9af96c3515bc3c44d3c
      size: 128
